<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Admin - Dashboard</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <!-- <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous"></script> -->
        <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="../assets/css/admin-style.css">
        <script src="https://smtpjs.com/v3/smtp.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.min.js"></script>

    </head>

    <body>
        <!-- ======== Main wrapper for dashboard =========== -->

        <div class="wrapper">
            <!-- =========== Sidebar for admin dashboard =========== -->
            <div id="sidebar" class="sidebar close">
                <div class="logo-details clickable">
                    <!-- <i class='bx bxs-ship'></i> -->
                    <!-- <span class="logo_name">CallArBoat</span> -->
                    <i class='bx bx-menu'></i>
                </div>
                <ul class="nav-links">
                    <li>
                        <a href="admin-dashboard.html" id="dashboard-link">
                            <i class='bx bx-grid-alt'></i>
                            <span class="link_name">Dashboard</span>
                        </a>
                    </li>
                    <li class="active">
                        <a href="admin-accounts.html" id="accounts-link">
                            <i class='bx bx-user'></i>
                            <span class="link_name">Accounts</span>
                        </a>
                    </li>
                    <li>
                        <a href="admin-subscription.html" id="subscription-link">
                            <i class='bx bx-credit-card'></i>
                            <span class="link_name">Subscription</span>
                        </a>
                    </li>
                    <li>
                        <a href="admin-notification.html" id="notification-link">
                            <i class='bx bx-bell'></i>
                            <span class="link_name">Notification</span>
                        </a>
                    </li>
                    <!-- <li>
                        <a href="#">
                            <i class='bx bx-cog'></i>
                            <span class="link_name">Setting</span>
                        </a>
                    </li> -->
                    <!-- <li>
                        <div class="profile-details">

                            <div class="name-job">
                            <i class='bx bx-log-in'></i>
                        </div>
                        <i class='bx bx-log-out'></i> 
                        </div>
                    </li> -->
                </ul>
            </div>


            <div class="main">
                <!-- ========= Main navbar section of dashboard ======= -->
                <nav class="navbar navbar-expand bg-body-tertiary fixed-top sidebar-collapsed">
                    <div class="container-fluid">
                        <div class="sidebar-logo">
                            <a href="admin-dashboard.html">
                                <i class='bx bxs-ship'></i>
                                CallArBoat</a>
                        </div>
                        <ul class="navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" data-bs-toggle="dropdown" class="nav-icon">
                                    <img src="../assets/img/default-img.png" id="avatarID" alt="profile"
                                        class="avatar img-fluid ">
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="admin-profile.html" class="dropdown-item">Profile</a>
                                    <a id="logoutID" class="dropdown-item">Logout</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
                <!-- ========= Main content section of dashboard ======= -->
                <!-- Alert Message after Successfully Subscribe -->
                <div class="alert-container">
                    <div class="alert alert-primary text-center" role="alert">
                    </div>
                </div>
                <!-- ======= Accounts Section ======= -->
                <div id="accounts" class="accounts section-style">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <div class="page-title">
                                <h4>Accounts</h4>
                            </div>
                        </div>
                        <!-- ======= Total Users Cards ====== -->
                        <!-- <input type="hidden" id="moduleSelected" value="admin-dashboard"> -->
                        <div class="col-12">
                            <div class="row acc-card-body">
                                <div class="account-cards d-flex justify-content-between align-items-center">
                                    <div class="col-3 mb-0 flex-item">
                                        <div>
                                            <h5 class="acc-card-title">Total Admin Users</h5>
                                        </div>
                                        <div class="acc-total-admin d-flex justify-content-between align-items-center">
                                            <p class="acc-total-text" id="adminUser-Count">Loading...</p>
                                            <i class='bx bx-user'></i>
                                        </div>
                                    </div>
                                    <div class="col-3 mb-0 flex-item">
                                        <div>
                                            <h5 class="acc-card-title">Total Mobile Users</h5>
                                        </div>
                                        <div class="acc-total-admin d-flex justify-content-between align-items-center">
                                            <!-- <p class="acc-total-text">250</p> -->
                                            <p class="acc-total-text" id="mobileUser-Count">Loading...</p>
                                            <i class='bx bx-user'></i>
                                        </div>
                                    </div>
                                    <div class="col-3 mb-0 flex-item">
                                        <div>
                                            <h5 class="acc-card-title">Total Company Users</h5>
                                        </div>
                                        <div class="acc-total-admin d-flex justify-content-between align-items-center">
                                            <!-- <p class="acc-total-text">10</p> -->
                                            <p class="acc-total-text" id="webUser-Count">Loading...</p>
                                            <i class='bx bx-user'></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ======= Table Users ====== -->
                        <div class="col-12 mb-3">
                            <div class="acc-table-users m-5">
                                <!-- Dropdown and Button -->
                                <div class="col-12 mb-3 d-flex justify-content-between align-items-center">
                                    <!-- <div class="dropdown py-2 d-flex align-items-center">
                                        <a class="btn btn-light btn-sm dropdown-toggle" href="#" role="button"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                            Select Users
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="#">Action</a></li>
                                            <li><a class="dropdown-item" href="#">Another action</a>
                                            </li>
                                        </ul>
                                    </div> -->
                                    <select class="form-select" id="userTableSelector" aria-label="SelectUser"
                                        style="width: 12%;">
                                        <option selected value="admin">Admin User</option>
                                        <option value="mobile">Mobile User</option>
                                        <option value="web">Web User</option>
                                    </select>
                                    <button type="button" class="btn btn-primary px-3 d-flex align-items-center"
                                        data-bs-toggle="modal" data-bs-target="#account-addUser">Add
                                        <i class='bx bx-plus'></i>
                                    </button>
                                </div>
                                <!-- Table -->
                                <div class="col-12 mb-3 table-box">
                                    <div class="table-container">
                                        <div class="table-body" id="table-container-all">
                                            <!-- This table will be the default -->
                                            <table class="table table-borderless table-scroll" id="admin">
                                                <thead class="table-light line-header">
                                                    <tr class="headline">
                                                        <th scope="col">Name</th>
                                                        <th scope="col">Email</th>
                                                        <th scope="col">Password</th>
                                                        <th scope="col">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="adminTableBody">
                                                    <!-- Data will be generated -->
                                                </tbody>
                                            </table>
                                            <!-- This table will be seen when selected -->
                                            <!-- Mobile User table -->
                                            <table class="table table-borderless table-scroll" style="display: none;"
                                                id="mobile">
                                                <thead class="table-light line-header">
                                                    <tr class="headline">
                                                        <th scope="col">Name</th>
                                                        <th scope="col">Email</th>
                                                        <th scope="col">Phone Number</th>
                                                        <th scope="col">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="mobileTableBody">
                                                    <!-- Data will be generated -->
                                            </table>
                                            <!-- End Here -->
                                            <!-- Web User table -->
                                            <table class="table table-borderless table-scroll" style="display: none;"
                                                id="web">
                                                <thead class="table-light line-header">
                                                    <tr class="headline">
                                                        <th scope="col">Name</th>
                                                        <th scope="col">Email</th>
                                                        <th scope="col">Password</th>
                                                        <th scope="col">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="webTableBody">
                                                    <!-- Data will be generated -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== Account Add Modal ===== -->
                <div class="modal fade" id="account-addUser" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <!-- <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5> -->
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="col-12 text-center">
                                    <h4>Add Admin User</h4>
                                </div>
                                <div class="col-12">
                                    <form class="m-5" id="addAdminForm">
                                        <!-- Name input -->
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="adminName">Name</label>
                                            <input type="text" id="adminName" class="form-control"
                                                placeholder="Green Doe" />
                                        </div>

                                        <!-- Email input -->
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="adminEmail">Email address</label>
                                            <input type="email" id="adminEmail" class="form-control"
                                                placeholder="admin@email.com" oninput="handleEmailChange()" />
                                            <p id="errorMessage"></p>
                                        </div>

                                        <!-- Password input -->
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="adminPass">Password</label>
                                            <input type="password" id="adminPass" class="form-control"
                                                placeholder="********" />
                                        </div>

                                        <!-- Add Image -->
                                        <div class="form-group mb-4">
                                            <label for="profile" class="form-label">Upload Profile</label><br>
                                            <input type="file" id="profile" name="image" class="mb-4" required>
                                        </div>

                                        <!-- Error Message -->
                                        <div class="mb-4 error-message" id="error-msg" style="display: none;">
                                            <p class="bg-danger p-2 text-light" id="err_msg"></p>
                                        </div>

                                        <!-- Submit button -->
                                        <div class="form-group mb-4">
                                            <button type="submit" class="btn btn-primary addBtn">Submit</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== OTP Verification Modal ===== -->
                <div class="modal fade" id="otpVerification" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <!-- <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5> -->
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="col-12 text-center">
                                    <h4>Email Verification</h4>
                                </div>
                                <div class="col-12">
                                    <form class="m-5" id="enterOTPForm">
                                        <!-- OTP input -->
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="otpCode">Verification Code:</label>
                                            <input type="number" id="otpCode" class="form-control"
                                                placeholder="Enter verification code" />
                                        </div>

                                        <!-- Error Message -->
                                        <div class="mb-4 error-message" id="error-msg" style="display: none;">
                                            <p class="bg-danger p-2 text-light" id="err_msg"></p>
                                        </div>

                                        <!-- Submit button -->
                                        <div class="form-group mb-4">
                                            <button type="submit" class="btn btn-primary addBtn">Submit</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== Admin Account Edit Modal ===== -->

                <div class="modal fade" id="editAdminAccounts" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="col-12 text-center">
                                    <h4>Edit Admin Accounts</h4>
                                </div>
                                <div class="col-12">
                                    <form class="m-5" id="editAdminAcc">
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editAdmin">Name</label>
                                            <input type="text" id="editAdmin" class="form-control" />
                                        </div>
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editAdminEmail">Email</label>
                                            <input type="email" id="editAdminEmail" class="form-control" required />
                                        </div>
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editAdminPass">Password</label>
                                            <input type="password" id="editAdminPass" class="form-control" required />
                                        </div>
                                        <!-- Password input -->
                                        <!-- <div class="form-group mb-4">
                                            <label class="form-label" for="adminCurrentPass">Current Password</label>
                                            <input type="password" id="adminCurrentPass" class="form-control"
                                                placeholder="********" />
                                        </div>

                                        <div class="form-group mb-4">
                                            <label class="form-label" for="adminNewPass">New Password</label>
                                            <input type="password" id="adminNewPass" class="form-control"
                                                placeholder="********" />
                                        </div> -->

                                        <!-- Error Message -->
                                        <div class="mb-4 error-message" id="err-msg" style="display: none;">
                                            <p class="bg-danger p-2 text-light" id="error_msg"></p>
                                        </div>

                                        <div class="form-group mb-4">
                                            <button type="submit" class="btn btn-primary addBtn">Submit</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal End Here -->

                <!-- ===== Mobile Account Edit Modal ===== -->
                <div class="modal fade" id="editMobileAccounts" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <!-- <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5> -->
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="col-12 text-center">
                                    <h4>Edit Mobile Accounts</h4>
                                </div>
                                <div class="col-12">
                                    <form class="m-5" id="editMobileAcc">
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editMobile">Name</label>
                                            <input type="text" id="editMobile" class="form-control" />
                                        </div>
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editMobileEmail">Email</label>
                                            <input type="email" id="editMobileEmail" class="form-control" required />
                                        </div>
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editMobileNum">Number</label>
                                            <input type="number" id="editMobileNum" class="form-control" required />
                                        </div>

                                        <!-- Error Message -->
                                        <div class="mb-4 error-message" id="err-msg" style="display: none;">
                                            <p class="bg-danger p-2 text-light" id="error_msg"></p>
                                        </div>

                                        <div class="form-group mb-4">
                                            <button type="submit" class="btn btn-primary addBtn">Submit</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal End Here -->

                <!-- ===== Agency Account Edit Modal ===== -->
                <div class="modal fade" id="editAgencyAccounts" data-bs-backdrop="static" data-bs-keyboard="false"
                    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <!-- <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5> -->
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="col-12 text-center">
                                    <h4>Edit Agency Accounts</h4>
                                </div>
                                <div class="col-12">
                                    <form class="m-5" id="editWebAcc">
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editWeb">Name</label>
                                            <input type="text" id="editWeb" class="form-control" />
                                        </div>
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editWebEmail">Email</label>
                                            <input type="email" id="editWebEmail" class="form-control" required />
                                        </div>
                                        <div class="form-group mb-4">
                                            <label class="form-label" for="editWebPass">Password</label>
                                            <input type="password" id="editWebPass" class="form-control" required />
                                        </div>

                                        <!-- Error Message -->
                                        <div class="mb-4 error-message" id="err-msg" style="display: none;">
                                            <p class="bg-danger p-2 text-light" id="error_msg"></p>
                                        </div>

                                        <div class="form-group mb-4">
                                            <button type="submit" class="btn btn-primary addBtn">Submit</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal End Here -->

                <!-- ======= Accounts Section End ======= -->

            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous">
        </script>
        <script src="../assets/vendor/aos/aos.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
        <script src="../src/Chart.js"></script> -->
        <script src="../src/main.js"></script>
        <script type="module" src="../src/admin-UserAccounts.js"></script>
        <script src="bundle.js"></script>


        <script>
            // Email verification
            function handleEmailChange() {
                const emailInput = document.getElementById('adminEmail');
                const errorMessage = document.getElementById('errorMessage');
                const typedEmail = emailInput.value;

                // Validate the email using a regular expression
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const isValidEmail = emailRegex.test(typedEmail);

                // Update the error message paragraph based on the validation result
                if (isValidEmail) {
                    errorMessage.textContent = 'Valid email format.';
                    errorMessage.style.color = 'green';
                    errorMessage.style.display = 'block';
                } else {
                    errorMessage.textContent = 'Not valid email format.';
                    errorMessage.style.color = 'red';
                    errorMessage.style.display = 'block';
                }

                // Show or hide the error message
                // errorMessage.style.display = isValidEmail ? 'none' : 'block';

                // Hide error message after 3 seconds
                setTimeout(function () {
                    errorMessage.style.display = 'none';
                }, 5000);
            }

        </script>
    </body>

</html>
